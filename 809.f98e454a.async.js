(self.webpackChunk_trionesdev_antd_react_ext=self.webpackChunk_trionesdev_antd_react_ext||[]).push([[809],{82826:function(W,D,m){"use strict";m.d(D,{Z:function(){return M}});var x=m(87462),g=m(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},I=E,b=m(13401),A=function(T,v){return g.createElement(b.Z,(0,x.Z)({},T,{ref:v,icon:I}))},R=g.forwardRef(A),M=R},88916:function(W,D,m){"use strict";m.d(D,{Z:function(){return M}});var x=m(87462),g=m(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"},I=E,b=m(13401),A=function(T,v){return g.createElement(b.Z,(0,x.Z)({},T,{ref:v,icon:I}))},R=g.forwardRef(A),M=R},84477:function(W,D,m){"use strict";m.d(D,{Z:function(){return M}});var x=m(87462),g=m(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"},I=E,b=m(13401),A=function(T,v){return g.createElement(b.Z,(0,x.Z)({},T,{ref:v,icon:I}))},R=g.forwardRef(A),M=R},19944:function(W,D,m){"use strict";m.d(D,{Z:function(){return M}});var x=m(87462),g=m(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"},I=E,b=m(13401),A=function(T,v){return g.createElement(b.Z,(0,x.Z)({},T,{ref:v,icon:I}))},R=g.forwardRef(A),M=R},88484:function(W,D,m){"use strict";m.d(D,{Z:function(){return M}});var x=m(87462),g=m(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},I=E,b=m(13401),A=function(T,v){return g.createElement(b.Z,(0,x.Z)({},T,{ref:v,icon:I}))},R=g.forwardRef(A),M=R},87547:function(W,D,m){"use strict";m.d(D,{Z:function(){return M}});var x=m(87462),g=m(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},I=E,b=m(13401),A=function(T,v){return g.createElement(b.Z,(0,x.Z)({},T,{ref:v,icon:I}))},R=g.forwardRef(A),M=R},94234:function(W,D,m){"use strict";m.d(D,{ZP:function(){return ne}});const x=typeof window!="undefined"&&typeof window.document!="undefined",g=x?window:{},E=x?"ontouchstart"in g.document.documentElement:!1,I=x?"PointerEvent"in g:!1,b="cropper",A=`${b}-canvas`,R=`${b}-crosshair`,M=`${b}-grid`,Z=`${b}-handle`,T=`${b}-image`,v=`${b}-selection`,B=`${b}-shade`,ae=`${b}-viewer`,at="select",yt="move",J="scale",ut="rotate",ot="transform",F="none",At="n-resize",Tt="e-resize",Ot="s-resize",kt="w-resize",tt="ne-resize",et="nw-resize",st="se-resize",it="sw-resize",oe="action",re=E?"touchend touchcancel":"mouseup",ce=E?"touchmove":"mousemove",xt=I?"pointerdown":E?"touchstart":"mousedown",_t=I?"pointermove":ce,It=I?"pointerup pointercancel":re,Nt="error",Rt="keydown",q="load",Pe="resize",Mt="wheel",Q="action",G="actionend",he="actionmove",V="actionstart",K="change",ft="transform";function rt(l){return typeof l=="string"}const zt=Number.isNaN||g.isNaN;function f(l){return typeof l=="number"&&!zt(l)}function L(l){return f(l)&&l>0&&l<1/0}function le(l){return typeof l=="undefined"}function Pt(l){return typeof l=="object"&&l!==null}const{hasOwnProperty:de}=Object.prototype;function ct(l){if(!Pt(l))return!1;try{const{constructor:t}=l,{prototype:e}=t;return t&&e&&de.call(e,"isPrototypeOf")}catch(t){return!1}}function $t(l){return typeof l=="function"}function nt(l){return typeof l=="object"&&l!==null&&l.nodeType===1}const ue=/([a-z\d])([A-Z])/g;function Dt(l){return String(l).replace(ue,"$1-$2").toLowerCase()}const fe=/-[A-z\d]/g;function Lt(l){return l.replace(fe,t=>t.slice(1).toUpperCase())}const Ht=/\s\s*/;function O(l,t,e,s){t.trim().split(Ht).forEach(i=>{l.removeEventListener(i,e,s)})}function k(l,t,e,s){t.trim().split(Ht).forEach(i=>{l.addEventListener(i,e,s)})}function Ut(l,t,e,s){k(l,t,e,Object.assign(Object.assign({},s),{once:!0}))}const $e={bubbles:!0,cancelable:!0,composed:!0};function me(l,t,e,s){return l.dispatchEvent(new CustomEvent(t,Object.assign(Object.assign(Object.assign({},$e),{detail:e}),s)))}const Wt=Promise.resolve();function pe(l,t){return t?Wt.then(l?t.bind(l):t):Wt}function Xt(l){const{documentElement:t}=l.ownerDocument,e=l.getBoundingClientRect();return{left:e.left+(g.pageXOffset-t.clientLeft),top:e.top+(g.pageYOffset-t.clientTop)}}const ge=/deg|g?rad|turn$/i;function mt(l){const t=parseFloat(l)||0;if(t!==0){const[e="rad"]=String(l).match(ge)||[];switch(e.toLowerCase()){case"deg":return t/360*(Math.PI*2);case"grad":return t/400*(Math.PI*2);case"turn":return t*(Math.PI*2)}}return t}const Yt="contain",be="cover";function ht(l,t=Yt){const{aspectRatio:e}=l;let{width:s,height:i}=l;const n=L(s),r=L(i);if(n&&r){const a=i*e;t===Yt&&a>s||t===be&&a<s?i=s/e:s=i*e}else n?i=s/e:r&&(s=i*e);return{width:s,height:i}}function Zt(l,...t){if(t.length===0)return l;const[e,s,i,n,r,a]=l,[h,c,o,u,$,p]=t[0];return l=[e*h+i*c,s*h+n*c,e*o+i*u,s*o+n*u,e*$+i*p+r,s*$+n*p+a],Zt(l,...t.slice(1))}var ve=":host([hidden]){display:none!important}";const Ce=/left|top|width|height/i,jt="open",lt=new WeakMap,dt=new WeakMap,Bt=new Map,Ft=g.document&&Array.isArray(g.document.adoptedStyleSheets)&&"replaceSync"in g.CSSStyleSheet.prototype;class j extends HTMLElement{get $sharedStyle(){return`${this.themeColor?`:host{--theme-color: ${this.themeColor};}`:""}${ve}`}constructor(){var t,e;super(),this.shadowRootMode=jt,this.slottable=!0;const s=(e=(t=Object.getPrototypeOf(this))===null||t===void 0?void 0:t.constructor)===null||e===void 0?void 0:e.$name;s&&Bt.set(s,this.tagName.toLowerCase())}static get observedAttributes(){return["shadow-root-mode","slottable","theme-color"]}attributeChangedCallback(t,e,s){if(Object.is(s,e))return;const i=Lt(t),n=this[i];let r=s;switch(typeof n){case"boolean":r=s!==null&&s!=="false";break;case"number":r=Number(s);break}switch(this[i]=r,t){case"theme-color":{const a=dt.get(this),h=this.$sharedStyle;a&&h&&(Ft?a.replaceSync(h):a.textContent=h);break}}}$propertyChangedCallback(t,e,s){if(!Object.is(s,e))switch(t=Dt(t),typeof s){case"boolean":s===!0?this.hasAttribute(t)||this.setAttribute(t,""):this.removeAttribute(t);break;case"number":zt(s)?s="":s=String(s);default:s?this.getAttribute(t)!==s&&this.setAttribute(t,s):this.removeAttribute(t)}}connectedCallback(){Object.getPrototypeOf(this).constructor.observedAttributes.forEach(e=>{const s=Lt(e);let i=this[s];le(i)||this.$propertyChangedCallback(s,void 0,i),Object.defineProperty(this,s,{enumerable:!0,configurable:!0,get(){return i},set(n){const r=i;i=n,this.$propertyChangedCallback(s,r,n)}})});const t=this.attachShadow({mode:this.shadowRootMode||jt});if(this.shadowRoot||lt.set(this,t),dt.set(this,this.$addStyles(this.$sharedStyle)),this.$style&&this.$addStyles(this.$style),this.$template){const e=document.createElement("template");e.innerHTML=this.$template,t.appendChild(e.content)}if(this.slottable){const e=document.createElement("slot");t.appendChild(e)}}disconnectedCallback(){dt.has(this)&&dt.delete(this),lt.has(this)&&lt.delete(this)}$getTagNameOf(t){var e;return(e=Bt.get(t))!==null&&e!==void 0?e:t}$setStyles(t){return Object.keys(t).forEach(e=>{let s=t[e];f(s)&&(s!==0&&Ce.test(e)?s=`${s}px`:s=String(s)),this.style[e]=s}),this}$getShadowRoot(){return this.shadowRoot||lt.get(this)}$addStyles(t){let e;const s=this.$getShadowRoot();return Ft?(e=new CSSStyleSheet,e.replaceSync(t),s.adoptedStyleSheets=s.adoptedStyleSheets.concat(e)):(e=document.createElement("style"),e.textContent=t,s.appendChild(e)),e}$emit(t,e,s){return me(this,t,e,s)}$nextTick(t){return pe(this,t)}static $define(t,e){Pt(t)&&(e=t,t=""),t||(t=this.$name||this.name),t=Dt(t),x&&g.customElements&&!g.customElements.get(t)&&customElements.define(t,this,e)}}j.$version="2.0.0";var Ee=':host{display:block;min-height:100px;min-width:200px;overflow:hidden;position:relative;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host([background]){background-color:#fff;background-image:repeating-linear-gradient(45deg,#ccc 25%,transparent 0,transparent 75%,#ccc 0,#ccc),repeating-linear-gradient(45deg,#ccc 25%,transparent 0,transparent 75%,#ccc 0,#ccc);background-image:repeating-conic-gradient(#ccc 0 25%,#fff 0 50%);background-position:0 0,.5rem .5rem;background-size:1rem 1rem}:host([disabled]){pointer-events:none}:host([disabled]):after{bottom:0;content:"";cursor:not-allowed;display:block;left:0;pointer-events:none;position:absolute;right:0;top:0}';class pt extends j{constructor(){super(...arguments),this.$onPointerDown=null,this.$onPointerMove=null,this.$onPointerUp=null,this.$onWheel=null,this.$wheeling=!1,this.$pointers=new Map,this.$style=Ee,this.$action=F,this.background=!1,this.disabled=!1,this.scaleStep=.1,this.themeColor="#39f"}static get observedAttributes(){return super.observedAttributes.concat(["background","disabled","scale-step"])}connectedCallback(){super.connectedCallback(),this.disabled||this.$bind()}disconnectedCallback(){this.disabled||this.$unbind(),super.disconnectedCallback()}$propertyChangedCallback(t,e,s){if(!Object.is(s,e))switch(super.$propertyChangedCallback(t,e,s),t){case"disabled":s?this.$unbind():this.$bind();break}}$bind(){this.$onPointerDown||(this.$onPointerDown=this.$handlePointerDown.bind(this),k(this,xt,this.$onPointerDown)),this.$onPointerMove||(this.$onPointerMove=this.$handlePointerMove.bind(this),k(this.ownerDocument,_t,this.$onPointerMove)),this.$onPointerUp||(this.$onPointerUp=this.$handlePointerUp.bind(this),k(this.ownerDocument,It,this.$onPointerUp)),this.$onWheel||(this.$onWheel=this.$handleWheel.bind(this),k(this,Mt,this.$onWheel,{passive:!1,capture:!0}))}$unbind(){this.$onPointerDown&&(O(this,xt,this.$onPointerDown),this.$onPointerDown=null),this.$onPointerMove&&(O(this.ownerDocument,_t,this.$onPointerMove),this.$onPointerMove=null),this.$onPointerUp&&(O(this.ownerDocument,It,this.$onPointerUp),this.$onPointerUp=null),this.$onWheel&&(O(this,Mt,this.$onWheel,{capture:!0}),this.$onWheel=null)}$handlePointerDown(t){const{buttons:e,button:s,type:i}=t;if(this.disabled||(i==="pointerdown"&&t.pointerType==="mouse"||i==="mousedown")&&(f(e)&&e!==1||f(s)&&s!==0||t.ctrlKey))return;const{$pointers:n}=this;let r="";if(t.changedTouches)Array.from(t.changedTouches).forEach(({identifier:a,pageX:h,pageY:c})=>{n.set(a,{startX:h,startY:c,endX:h,endY:c})});else{const{pointerId:a=0,pageX:h,pageY:c}=t;n.set(a,{startX:h,startY:c,endX:h,endY:c})}n.size>1?r=ot:nt(t.target)&&(r=t.target.action||t.target.getAttribute(oe)||""),this.$emit(V,{action:r,relatedEvent:t})!==!1&&(t.preventDefault(),this.$action=r,this.style.willChange="transform")}$handlePointerMove(t){const{$action:e,$pointers:s}=this;if(this.disabled||e===F||s.size===0||this.$emit(he,{action:e,relatedEvent:t})===!1)return;if(t.preventDefault(),t.changedTouches)Array.from(t.changedTouches).forEach(({identifier:n,pageX:r,pageY:a})=>{const h=s.get(n);h&&Object.assign(h,{endX:r,endY:a})});else{const{pointerId:n=0,pageX:r,pageY:a}=t,h=s.get(n);h&&Object.assign(h,{endX:r,endY:a})}const i={action:e,relatedEvent:t};if(e===ot){const n=new Map(s);let r=0,a=0,h=0,c=0,o=t.pageX,u=t.pageY;s.forEach((d,z)=>{n.delete(z),n.forEach(_=>{let C=_.startX-d.startX,y=_.startY-d.startY,w=_.endX-d.endX,S=_.endY-d.endY,N=0,P=0,H=0,U=0;if(C===0?y<0?H=Math.PI*2:y>0&&(H=Math.PI):C>0?H=Math.PI/2+Math.atan(y/C):C<0&&(H=Math.PI*1.5+Math.atan(y/C)),w===0?S<0?U=Math.PI*2:S>0&&(U=Math.PI):w>0?U=Math.PI/2+Math.atan(S/w):w<0&&(U=Math.PI*1.5+Math.atan(S/w)),U>0||H>0){const X=U-H,Y=Math.abs(X);Y>r&&(r=Y,h=X,o=(d.startX+_.startX)/2,u=(d.startY+_.startY)/2)}if(C=Math.abs(C),y=Math.abs(y),w=Math.abs(w),S=Math.abs(S),C>0&&y>0?N=Math.sqrt(C*C+y*y):C>0?N=C:y>0&&(N=y),w>0&&S>0?P=Math.sqrt(w*w+S*S):w>0?P=w:S>0&&(P=S),N>0&&P>0){const X=(P-N)/N,Y=Math.abs(X);Y>a&&(a=Y,c=X,o=(d.startX+_.startX)/2,u=(d.startY+_.startY)/2)}})});const $=r>0,p=a>0;$&&p?(i.rotate=h,i.scale=c,i.centerX=o,i.centerY=u):$?(i.action=ut,i.rotate=h,i.centerX=o,i.centerY=u):p?(i.action=J,i.scale=c,i.centerX=o,i.centerY=u):i.action=F}else{const[n]=Array.from(s.values());Object.assign(i,n)}s.forEach(n=>{n.startX=n.endX,n.startY=n.endY}),i.action!==F&&this.$emit(Q,i,{cancelable:!1})}$handlePointerUp(t){const{$action:e,$pointers:s}=this;if(!(this.disabled||e===F)&&this.$emit(G,{action:e,relatedEvent:t})!==!1){if(t.preventDefault(),t.changedTouches)Array.from(t.changedTouches).forEach(({identifier:i})=>{s.delete(i)});else{const{pointerId:i=0}=t;s.delete(i)}s.size===0&&(this.style.willChange="",this.$action=F)}}$handleWheel(t){if(this.disabled||(t.preventDefault(),this.$wheeling))return;this.$wheeling=!0,setTimeout(()=>{this.$wheeling=!1},50);const s=(t.deltaY>0?-1:1)*this.scaleStep;this.$emit(Q,{action:J,scale:s,relatedEvent:t},{cancelable:!1})}$setAction(t){return rt(t)&&(this.$action=t),this}$toCanvas(t){return new Promise((e,s)=>{if(!this.isConnected){s(new Error("The current element is not connected to the DOM."));return}const i=document.createElement("canvas");let n=this.offsetWidth,r=this.offsetHeight,a=1;ct(t)&&(L(t.width)||L(t.height))&&({width:n,height:r}=ht({aspectRatio:n/r,width:t.width,height:t.height}),a=n/this.offsetWidth),i.width=n,i.height=r;const h=this.querySelector(this.$getTagNameOf(T));if(!h){e(i);return}h.$ready().then(c=>{const o=i.getContext("2d");if(o){const[u,$,p,d,z,_]=h.$getTransform();let C=z,y=_,w=c.naturalWidth,S=c.naturalHeight;a!==1&&(C*=a,y*=a,w*=a,S*=a);const N=w/2,P=S/2;o.fillStyle="transparent",o.fillRect(0,0,n,r),ct(t)&&$t(t.beforeDraw)&&t.beforeDraw.call(this,o,i),o.save(),o.translate(N,P),o.transform(u,$,p,d,C,y),o.translate(-N,-P),o.drawImage(c,0,0,w,S),o.restore()}e(i)}).catch(s)})}}pt.$name=A,pt.$version="2.0.0";var we=":host{display:inline-block}img{display:block;height:100%;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}";const Kt=new WeakMap,Gt=["alt","crossorigin","decoding","importance","loading","referrerpolicy","sizes","src","srcset"];class gt extends j{constructor(){super(...arguments),this.$matrix=[1,0,0,1,0,0],this.$onLoad=null,this.$onCanvasAction=null,this.$onCanvasActionEnd=null,this.$onCanvasActionStart=null,this.$actionStartTarget=null,this.$style=we,this.$image=new Image,this.initialCenterSize="contain",this.rotatable=!1,this.scalable=!1,this.skewable=!1,this.slottable=!1,this.translatable=!1}set $canvas(t){Kt.set(this,t)}get $canvas(){return Kt.get(this)}static get observedAttributes(){return super.observedAttributes.concat(Gt,["initial-center-size","rotatable","scalable","skewable","translatable"])}attributeChangedCallback(t,e,s){Object.is(s,e)||(super.attributeChangedCallback(t,e,s),Gt.includes(t)&&this.$image.setAttribute(t,s))}$propertyChangedCallback(t,e,s){if(!Object.is(s,e))switch(super.$propertyChangedCallback(t,e,s),t){case"initialCenterSize":this.$nextTick(()=>{this.$center(s)});break}}connectedCallback(){super.connectedCallback();const{$image:t}=this,e=this.closest(this.$getTagNameOf(A));e&&(this.$canvas=e,this.$setStyles({display:"block",position:"absolute"}),this.$onCanvasActionStart=s=>{var i,n;this.$actionStartTarget=(n=(i=s.detail)===null||i===void 0?void 0:i.relatedEvent)===null||n===void 0?void 0:n.target},this.$onCanvasActionEnd=()=>{this.$actionStartTarget=null},this.$onCanvasAction=this.$handleAction.bind(this),k(e,V,this.$onCanvasActionStart),k(e,G,this.$onCanvasActionEnd),k(e,Q,this.$onCanvasAction)),this.$onLoad=this.$handleLoad.bind(this),k(t,q,this.$onLoad),this.$getShadowRoot().appendChild(t)}disconnectedCallback(){const{$image:t,$canvas:e}=this;e&&(this.$onCanvasActionStart&&(O(e,V,this.$onCanvasActionStart),this.$onCanvasActionStart=null),this.$onCanvasActionEnd&&(O(e,G,this.$onCanvasActionEnd),this.$onCanvasActionEnd=null),this.$onCanvasAction&&(O(e,Q,this.$onCanvasAction),this.$onCanvasAction=null)),t&&this.$onLoad&&(O(t,q,this.$onLoad),this.$onLoad=null),this.$getShadowRoot().removeChild(t),super.disconnectedCallback()}$handleLoad(){const{$image:t}=this;this.$setStyles({width:t.naturalWidth,height:t.naturalHeight}),this.$canvas&&this.$center(this.initialCenterSize)}$handleAction(t){if(this.hidden||!(this.rotatable||this.scalable||this.translatable))return;const{$canvas:e}=this,{detail:s}=t;if(s){const{relatedEvent:i}=s;let{action:n}=s;switch(n===ot&&(!this.rotatable||!this.scalable)&&(this.rotatable?n=ut:this.scalable?n=J:n=F),n){case yt:if(this.translatable){let r=null;i&&(r=i.target.closest(this.$getTagNameOf(v))),r||(r=e.querySelector(this.$getTagNameOf(v))),r&&r.multiple&&!r.active&&(r=e.querySelector(`${this.$getTagNameOf(v)}[active]`)),(!r||r.hidden||!r.movable||r.dynamic||!(this.$actionStartTarget&&r.contains(this.$actionStartTarget)))&&this.$move(s.endX-s.startX,s.endY-s.startY)}break;case ut:if(this.rotatable)if(i){const{x:r,y:a}=this.getBoundingClientRect();this.$rotate(s.rotate,i.clientX-r,i.clientY-a)}else this.$rotate(s.rotate);break;case J:if(this.scalable)if(i){const r=i.target.closest(this.$getTagNameOf(v));if(!r||!r.zoomable||r.zoomable&&r.dynamic){const{x:a,y:h}=this.getBoundingClientRect();this.$zoom(s.scale,i.clientX-a,i.clientY-h)}}else this.$zoom(s.scale);break;case ot:if(this.rotatable&&this.scalable){const{rotate:r}=s;let{scale:a}=s;a<0?a=1/(1-a):a+=1;const h=Math.cos(r),c=Math.sin(r),[o,u,$,p]=[h*a,c*a,-c*a,h*a];if(i){const d=this.getBoundingClientRect(),z=i.clientX-d.x,_=i.clientY-d.y,[C,y,w,S]=this.$matrix,N=d.width/2,P=d.height/2,H=z-N,U=_-P,X=(H*S-w*U)/(C*S-w*y),Y=(U*C-y*H)/(C*S-w*y);this.$transform(o,u,$,p,X*(1-o)+Y*$,Y*(1-p)+X*u)}else this.$transform(o,u,$,p,0,0)}break}}}$ready(t){const{$image:e}=this,s=new Promise((i,n)=>{const r=new Error("Failed to load the image source");if(e.complete)e.naturalWidth>0&&e.naturalHeight>0?i(e):n(r);else{const a=()=>{O(e,Nt,h),i(e)},h=()=>{O(e,q,a),n(r)};Ut(e,q,a),Ut(e,Nt,h)}});return $t(t)&&s.then(i=>(t(i),i)),s}$center(t){const{parentElement:e}=this;if(!e)return this;const s=e.getBoundingClientRect(),i=s.width,n=s.height,{x:r,y:a,width:h,height:c}=this.getBoundingClientRect(),o=r+h/2,u=a+c/2,$=s.x+i/2,p=s.y+n/2;if(this.$move($-o,p-u),t&&(h!==i||c!==n)){const d=i/h,z=n/c;switch(t){case"cover":this.$scale(Math.max(d,z));break;case"contain":this.$scale(Math.min(d,z));break}}return this}$move(t,e=t){if(this.translatable&&f(t)&&f(e)){const[s,i,n,r]=this.$matrix,a=(t*r-n*e)/(s*r-n*i),h=(e*s-i*t)/(s*r-n*i);this.$translate(a,h)}return this}$moveTo(t,e=t){if(this.translatable&&f(t)&&f(e)){const[s,i,n,r]=this.$matrix,a=(t*r-n*e)/(s*r-n*i),h=(e*s-i*t)/(s*r-n*i);this.$setTransform(s,i,n,r,a,h)}return this}$rotate(t,e,s){if(this.rotatable){const i=mt(t),n=Math.cos(i),r=Math.sin(i),[a,h,c,o]=[n,r,-r,n];if(f(e)&&f(s)){const[u,$,p,d]=this.$matrix,{width:z,height:_}=this.getBoundingClientRect(),C=z/2,y=_/2,w=e-C,S=s-y,N=(w*d-p*S)/(u*d-p*$),P=(S*u-$*w)/(u*d-p*$);this.$transform(a,h,c,o,N*(1-a)-P*c,P*(1-o)-N*h)}else this.$transform(a,h,c,o,0,0)}return this}$zoom(t,e,s){if(!this.scalable||t===0)return this;if(t<0?t=1/(1-t):t+=1,f(e)&&f(s)){const[i,n,r,a]=this.$matrix,{width:h,height:c}=this.getBoundingClientRect(),o=h/2,u=c/2,$=e-o,p=s-u,d=($*a-r*p)/(i*a-r*n),z=(p*i-n*$)/(i*a-r*n);this.$transform(t,0,0,t,d*(1-t),z*(1-t))}else this.$scale(t);return this}$scale(t,e=t){return this.scalable&&this.$transform(t,0,0,e,0,0),this}$skew(t,e=0){if(this.skewable){const s=mt(t),i=mt(e);this.$transform(1,Math.tan(i),Math.tan(s),1,0,0)}return this}$translate(t,e=t){return this.translatable&&f(t)&&f(e)&&this.$transform(1,0,0,1,t,e),this}$transform(t,e,s,i,n,r){return f(t)&&f(e)&&f(s)&&f(i)&&f(n)&&f(r)?this.$setTransform(Zt(this.$matrix,[t,e,s,i,n,r])):this}$setTransform(t,e,s,i,n,r){if((this.rotatable||this.scalable||this.skewable||this.translatable)&&(Array.isArray(t)&&([t,e,s,i,n,r]=t),f(t)&&f(e)&&f(s)&&f(i)&&f(n)&&f(r))){const a=[...this.$matrix],h=[t,e,s,i,n,r];if(this.$emit(ft,{matrix:h,oldMatrix:a})===!1)return this;this.$matrix=h,this.style.transform=`matrix(${h.join(", ")})`}return this}$getTransform(){return this.$matrix.slice()}$resetTransform(){return this.$setTransform([1,0,0,1,0,0])}}gt.$name=T,gt.$version="2.0.0";var Se=":host{display:block;height:0;left:0;outline:var(--theme-color) solid 1px;position:relative;top:0;width:0}:host([transparent]){outline-color:transparent}";const Vt=new WeakMap;class bt extends j{constructor(){super(...arguments),this.$onCanvasChange=null,this.$onCanvasActionEnd=null,this.$onCanvasActionStart=null,this.$style=Se,this.x=0,this.y=0,this.width=0,this.height=0,this.slottable=!1,this.themeColor="rgba(0, 0, 0, 0.65)"}set $canvas(t){Vt.set(this,t)}get $canvas(){return Vt.get(this)}static get observedAttributes(){return super.observedAttributes.concat(["height","width","x","y"])}connectedCallback(){super.connectedCallback();const t=this.closest(this.$getTagNameOf(A));if(t){this.$canvas=t,this.style.position="absolute";const e=t.querySelector(this.$getTagNameOf(v));e&&(this.$onCanvasActionStart=s=>{e.hidden&&s.detail.action===at&&(this.hidden=!1)},this.$onCanvasActionEnd=s=>{e.hidden&&s.detail.action===at&&(this.hidden=!0)},this.$onCanvasChange=s=>{const{x:i,y:n,width:r,height:a}=s.detail;this.$change(i,n,r,a),(e.hidden||i===0&&n===0&&r===0&&a===0)&&(this.hidden=!0)},k(t,V,this.$onCanvasActionStart),k(t,G,this.$onCanvasActionEnd),k(t,K,this.$onCanvasChange))}this.$render()}disconnectedCallback(){const{$canvas:t}=this;t&&(this.$onCanvasActionStart&&(O(t,V,this.$onCanvasActionStart),this.$onCanvasActionStart=null),this.$onCanvasActionEnd&&(O(t,G,this.$onCanvasActionEnd),this.$onCanvasActionEnd=null),this.$onCanvasChange&&(O(t,K,this.$onCanvasChange),this.$onCanvasChange=null)),super.disconnectedCallback()}$change(t,e,s=this.width,i=this.height){return!f(t)||!f(e)||!f(s)||!f(i)||t===this.x&&e===this.y&&s===this.width&&i===this.height?this:(this.hidden&&(this.hidden=!1),this.x=t,this.y=e,this.width=s,this.height=i,this.$render())}$reset(){return this.$change(0,0,0,0)}$render(){return this.$setStyles({transform:`translate(${this.x}px, ${this.y}px)`,width:this.width,height:this.height,outlineWidth:g.innerWidth})}}bt.$name=B,bt.$version="2.0.0";var ye=':host{background-color:var(--theme-color);display:block}:host([action=move]),:host([action=select]){height:100%;left:0;position:absolute;top:0;width:100%}:host([action=move]){cursor:move}:host([action=select]){cursor:crosshair}:host([action$=-resize]){background-color:transparent;height:15px;position:absolute;width:15px}:host([action$=-resize]):after{background-color:var(--theme-color);content:"";display:block;height:5px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:5px}:host([action=n-resize]),:host([action=s-resize]){cursor:ns-resize;left:50%;transform:translateX(-50%);width:100%}:host([action=n-resize]){top:-8px}:host([action=s-resize]){bottom:-8px}:host([action=e-resize]),:host([action=w-resize]){cursor:ew-resize;height:100%;top:50%;transform:translateY(-50%)}:host([action=e-resize]){right:-8px}:host([action=w-resize]){left:-8px}:host([action=ne-resize]){cursor:nesw-resize;right:-8px;top:-8px}:host([action=nw-resize]){cursor:nwse-resize;left:-8px;top:-8px}:host([action=se-resize]){bottom:-8px;cursor:nwse-resize;right:-8px}:host([action=se-resize]):after{height:15px;width:15px}@media (pointer:coarse){:host([action=se-resize]):after{height:10px;width:10px}}@media (pointer:fine){:host([action=se-resize]):after{height:5px;width:5px}}:host([action=sw-resize]){bottom:-8px;cursor:nesw-resize;left:-8px}:host([plain]){background-color:transparent}';class vt extends j{constructor(){super(...arguments),this.$onCanvasCropEnd=null,this.$onCanvasCropStart=null,this.$style=ye,this.action=F,this.plain=!1,this.slottable=!1,this.themeColor="rgba(51, 153, 255, 0.5)"}static get observedAttributes(){return super.observedAttributes.concat(["action","plain"])}}vt.$name=Z,vt.$version="2.0.0";var Ae=':host{display:block;left:0;position:relative;right:0}:host([outlined]){outline:1px solid var(--theme-color)}:host([multiple]){outline:1px dashed hsla(0,0%,100%,.5)}:host([multiple]):after{bottom:0;content:"";cursor:pointer;display:block;left:0;position:absolute;right:0;top:0}:host([multiple][active]){outline-color:var(--theme-color);z-index:1}:host([multiple])>*{visibility:hidden}:host([multiple][active])>*{visibility:visible}:host([multiple][active]):after{display:none}';const Jt=new WeakMap;class Ct extends j{constructor(){super(...arguments),this.$onCanvasAction=null,this.$onCanvasActionStart=null,this.$onCanvasActionEnd=null,this.$onDocumentKeyDown=null,this.$action="",this.$actionStartTarget=null,this.$changing=!1,this.$style=Ae,this.$initialSelection={x:0,y:0,width:0,height:0},this.x=0,this.y=0,this.width=0,this.height=0,this.aspectRatio=NaN,this.initialAspectRatio=NaN,this.initialCoverage=NaN,this.active=!1,this.linked=!1,this.dynamic=!1,this.movable=!1,this.resizable=!1,this.zoomable=!1,this.multiple=!1,this.keyboard=!1,this.outlined=!1,this.precise=!1}set $canvas(t){Jt.set(this,t)}get $canvas(){return Jt.get(this)}static get observedAttributes(){return super.observedAttributes.concat(["active","aspect-ratio","dynamic","height","initial-aspect-ratio","initial-coverage","keyboard","linked","movable","multiple","outlined","precise","resizable","width","x","y","zoomable"])}$propertyChangedCallback(t,e,s){if(!Object.is(s,e))switch(super.$propertyChangedCallback(t,e,s),t){case"x":case"y":case"width":case"height":this.$changing||this.$nextTick(()=>{this.$change(this.x,this.y,this.width,this.height,this.aspectRatio,!0)});break;case"aspectRatio":case"initialAspectRatio":this.$nextTick(()=>{this.$initSelection()});break;case"initialCoverage":this.$nextTick(()=>{L(s)&&s<=1&&this.$initSelection(!0,!0)});break;case"keyboard":this.$nextTick(()=>{this.$canvas&&(s?this.$onDocumentKeyDown||(this.$onDocumentKeyDown=this.$handleKeyDown.bind(this),k(this.ownerDocument,Rt,this.$onDocumentKeyDown)):this.$onDocumentKeyDown&&(O(this.ownerDocument,Rt,this.$onDocumentKeyDown),this.$onDocumentKeyDown=null))});break;case"multiple":this.$nextTick(()=>{if(this.$canvas){const i=this.$getSelections();s?(i.forEach(n=>{n.active=!1}),this.active=!0,this.$emit(K,{x:this.x,y:this.y,width:this.width,height:this.height})):(this.active=!1,i.slice(1).forEach(n=>{this.$removeSelection(n)}))}});break;case"precise":this.$nextTick(()=>{this.$change(this.x,this.y)});break;case"linked":s&&(this.dynamic=!0);break}}connectedCallback(){super.connectedCallback();const t=this.closest(this.$getTagNameOf(A));t?(this.$canvas=t,this.$setStyles({position:"absolute",transform:`translate(${this.x}px, ${this.y}px)`}),this.hidden||this.$render(),this.$initSelection(!0),this.$onCanvasActionStart=this.$handleActionStart.bind(this),this.$onCanvasActionEnd=this.$handleActionEnd.bind(this),this.$onCanvasAction=this.$handleAction.bind(this),k(t,V,this.$onCanvasActionStart),k(t,G,this.$onCanvasActionEnd),k(t,Q,this.$onCanvasAction)):this.$render()}disconnectedCallback(){const{$canvas:t}=this;t&&(this.$onCanvasActionStart&&(O(t,V,this.$onCanvasActionStart),this.$onCanvasActionStart=null),this.$onCanvasActionEnd&&(O(t,G,this.$onCanvasActionEnd),this.$onCanvasActionEnd=null),this.$onCanvasAction&&(O(t,Q,this.$onCanvasAction),this.$onCanvasAction=null)),super.disconnectedCallback()}$getSelections(){let t=[];return this.parentElement&&(t=Array.from(this.parentElement.querySelectorAll(this.$getTagNameOf(v)))),t}$initSelection(t=!1,e=!1){const{initialCoverage:s,parentElement:i}=this;if(L(s)&&i){const n=this.aspectRatio||this.initialAspectRatio;let r=(e?0:this.width)||i.offsetWidth*s,a=(e?0:this.height)||i.offsetHeight*s;L(n)&&({width:r,height:a}=ht({aspectRatio:n,width:r,height:a})),this.$change(this.x,this.y,r,a),t&&this.$center(),this.$initialSelection={x:this.x,y:this.y,width:this.width,height:this.height}}}$createSelection(){const t=this.cloneNode(!0);return this.hasAttribute("id")&&t.removeAttribute("id"),t.initialCoverage=NaN,this.active=!1,this.parentElement&&this.parentElement.insertBefore(t,this.nextSibling),t}$removeSelection(t=this){if(this.parentElement){const e=this.$getSelections();if(e.length>1){const s=e.indexOf(t),i=e[s+1]||e[s-1];i&&(t.active=!1,this.parentElement.removeChild(t),i.active=!0,i.$emit(K,{x:i.x,y:i.y,width:i.width,height:i.height}))}else this.$clear()}}$handleActionStart(t){var e,s;const i=(s=(e=t.detail)===null||e===void 0?void 0:e.relatedEvent)===null||s===void 0?void 0:s.target;this.$action="",this.$actionStartTarget=i,!this.hidden&&this.multiple&&!this.active&&i===this&&this.parentElement&&(this.$getSelections().forEach(n=>{n.active=!1}),this.active=!0,this.$emit(K,{x:this.x,y:this.y,width:this.width,height:this.height}))}$handleAction(t){const{currentTarget:e,detail:s}=t;if(!e||!s)return;const{relatedEvent:i}=s;let{action:n}=s;if(!n&&this.multiple&&(n=this.$action||(i==null?void 0:i.target.action),this.$action=n),!n||this.hidden&&n!==at||this.multiple&&!this.active&&n!==J)return;const r=s.endX-s.startX,a=s.endY-s.startY,{width:h,height:c}=this;let{aspectRatio:o}=this;switch(!L(o)&&i.shiftKey&&(o=L(h)&&L(c)?h/c:1),n){case at:if(r!==0&&a!==0){const{$canvas:u}=this,$=Xt(e);(this.multiple&&!this.hidden?this.$createSelection():this).$change(s.startX-$.left,s.startY-$.top,Math.abs(r),Math.abs(a),o),r<0?a<0?n=et:a>0&&(n=it):r>0&&(a<0?n=tt:a>0&&(n=st)),u&&(u.$action=n)}break;case yt:this.movable&&(this.dynamic||this.$actionStartTarget&&this.contains(this.$actionStartTarget))&&this.$move(r,a);break;case J:if(i&&this.zoomable&&(this.dynamic||this.contains(i.target))){const u=Xt(e);this.$zoom(s.scale,i.pageX-u.left,i.pageY-u.top)}break;default:this.$resize(n,r,a,o)}}$handleActionEnd(){this.$action="",this.$actionStartTarget=null}$handleKeyDown(t){if(this.hidden||!this.keyboard||this.multiple&&!this.active||t.defaultPrevented)return;const{activeElement:e}=document;if(!(e&&(["INPUT","TEXTAREA"].includes(e.tagName)||["true","plaintext-only"].includes(e.contentEditable))))switch(t.key){case"Backspace":t.metaKey&&(t.preventDefault(),this.$removeSelection());break;case"Delete":t.preventDefault(),this.$removeSelection();break;case"ArrowLeft":t.preventDefault(),this.$move(-1,0);break;case"ArrowRight":t.preventDefault(),this.$move(1,0);break;case"ArrowUp":t.preventDefault(),this.$move(0,-1);break;case"ArrowDown":t.preventDefault(),this.$move(0,1);break;case"+":t.preventDefault(),this.$zoom(.1);break;case"-":t.preventDefault(),this.$zoom(-.1);break}}$center(){const{parentElement:t}=this;if(!t)return this;const e=(t.offsetWidth-this.width)/2,s=(t.offsetHeight-this.height)/2;return this.$change(e,s)}$move(t,e=t){return this.$moveTo(this.x+t,this.y+e)}$moveTo(t,e=t){return this.movable?this.$change(t,e):this}$resize(t,e=0,s=0,i=this.aspectRatio){if(!this.resizable)return this;const n=L(i),{$canvas:r}=this;let{x:a,y:h,width:c,height:o}=this;switch(t){case At:h+=s,o-=s,o<0&&(t=Ot,o=-o,h-=o),n&&(e=s*i,a+=e/2,c-=e,c<0&&(c=-c,a-=c));break;case Tt:c+=e,c<0&&(t=kt,c=-c,a-=c),n&&(s=e/i,h-=s/2,o+=s,o<0&&(o=-o,h-=o));break;case Ot:o+=s,o<0&&(t=At,o=-o,h-=o),n&&(e=s*i,a-=e/2,c+=e,c<0&&(c=-c,a-=c));break;case kt:a+=e,c-=e,c<0&&(t=Tt,c=-c,a-=c),n&&(s=e/i,h+=s/2,o-=s,o<0&&(o=-o,h-=o));break;case tt:n&&(s=-e/i),h+=s,o-=s,c+=e,c<0&&o<0?(t=it,c=-c,o=-o,a-=c,h-=o):c<0?(t=et,c=-c,a-=c):o<0&&(t=st,o=-o,h-=o);break;case et:n&&(s=e/i),a+=e,h+=s,c-=e,o-=s,c<0&&o<0?(t=st,c=-c,o=-o,a-=c,h-=o):c<0?(t=tt,c=-c,a-=c):o<0&&(t=it,o=-o,h-=o);break;case st:n&&(s=e/i),c+=e,o+=s,c<0&&o<0?(t=et,c=-c,o=-o,a-=c,h-=o):c<0?(t=it,c=-c,a-=c):o<0&&(t=tt,o=-o,h-=o);break;case it:n&&(s=-e/i),a+=e,c-=e,o+=s,c<0&&o<0?(t=tt,c=-c,o=-o,a-=c,h-=o):c<0?(t=st,c=-c,a-=c):o<0&&(t=et,o=-o,h-=o);break}return r&&r.$setAction(t),this.$change(a,h,c,o)}$zoom(t,e,s){if(!this.zoomable||t===0)return this;t<0?t=1/(1-t):t+=1;const{width:i,height:n}=this,r=i*t,a=n*t;let h=this.x,c=this.y;return f(e)&&f(s)?(h-=(r-i)*((e-this.x)/i),c-=(a-n)*((s-this.y)/n)):(h-=(r-i)/2,c-=(a-n)/2),this.$change(h,c,r,a)}$change(t,e,s=this.width,i=this.height,n=this.aspectRatio,r=!1){return this.$changing||!f(t)||!f(e)||!f(s)||!f(i)||s<0||i<0?this:(L(n)&&({width:s,height:i}=ht({aspectRatio:n,width:s,height:i},"cover")),this.precise||(t=Math.round(t),e=Math.round(e),s=Math.round(s),i=Math.round(i)),t===this.x&&e===this.y&&s===this.width&&i===this.height&&Object.is(n,this.aspectRatio)&&!r?this:(this.hidden&&(this.hidden=!1),this.$emit(K,{x:t,y:e,width:s,height:i})===!1?this:(this.$changing=!0,this.x=t,this.y=e,this.width=s,this.height=i,this.$changing=!1,this.$render())))}$reset(){const{x:t,y:e,width:s,height:i}=this.$initialSelection;return this.$change(t,e,s,i)}$clear(){return this.$change(0,0,0,0,NaN,!0),this.hidden=!0,this}$render(){return this.$setStyles({transform:`translate(${this.x}px, ${this.y}px)`,width:this.width,height:this.height})}$toCanvas(t){return new Promise((e,s)=>{if(!this.isConnected){s(new Error("The current element is not connected to the DOM."));return}const i=document.createElement("canvas");let{width:n,height:r}=this,a=1;if(ct(t)&&(L(t.width)||L(t.height))&&({width:n,height:r}=ht({aspectRatio:n/r,width:t.width,height:t.height}),a=n/this.width),i.width=n,i.height=r,!this.$canvas){e(i);return}const h=this.$canvas.querySelector(this.$getTagNameOf(T));if(!h){e(i);return}h.$ready().then(c=>{const o=i.getContext("2d");if(o){const[u,$,p,d,z,_]=h.$getTransform(),C=-this.x,y=-this.y,w=(C*d-p*y)/(u*d-p*$),S=(y*u-$*C)/(u*d-p*$);let N=u*w+p*S+z,P=$*w+d*S+_,H=c.naturalWidth,U=c.naturalHeight;a!==1&&(N*=a,P*=a,H*=a,U*=a);const X=H/2,Y=U/2;o.fillStyle="transparent",o.fillRect(0,0,n,r),ct(t)&&$t(t.beforeDraw)&&t.beforeDraw.call(this,o,i),o.save(),o.translate(X,Y),o.transform(u,$,p,d,N,P),o.translate(-X,-Y),o.drawImage(c,0,0,H,U),o.restore()}e(i)}).catch(s)})}}Ct.$name=v,Ct.$version="2.0.0";var Te=":host{display:flex;flex-direction:column;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host([bordered]){border:1px dashed var(--theme-color)}:host([covered]){bottom:0;left:0;position:absolute;right:0;top:0}:host>span{display:flex;flex:1}:host>span+span{border-top:1px dashed var(--theme-color)}:host>span>span{flex:1}:host>span>span+span{border-left:1px dashed var(--theme-color)}";class Et extends j{constructor(){super(...arguments),this.$style=Te,this.bordered=!1,this.columns=3,this.covered=!1,this.rows=3,this.slottable=!1,this.themeColor="rgba(238, 238, 238, 0.5)"}static get observedAttributes(){return super.observedAttributes.concat(["bordered","columns","covered","rows"])}$propertyChangedCallback(t,e,s){Object.is(s,e)||(super.$propertyChangedCallback(t,e,s),(t==="rows"||t==="columns")&&this.$nextTick(()=>{this.$render()}))}connectedCallback(){super.connectedCallback(),this.$render()}$render(){const t=this.$getShadowRoot(),e=document.createDocumentFragment();for(let s=0;s<this.rows;s+=1){const i=document.createElement("span");i.setAttribute("role","row");for(let n=0;n<this.columns;n+=1){const r=document.createElement("span");r.setAttribute("role","gridcell"),i.appendChild(r)}e.appendChild(i)}t&&(t.innerHTML="",t.appendChild(e))}}Et.$name=M,Et.$version="2.0.0";var Oe=':host{display:inline-block;height:1em;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;width:1em}:host:after,:host:before{background-color:var(--theme-color);content:"";display:block;position:absolute}:host:before{height:1px;left:0;top:50%;transform:translateY(-50%);width:100%}:host:after{height:100%;left:50%;top:0;transform:translateX(-50%);width:1px}:host([centered]){left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}';class wt extends j{constructor(){super(...arguments),this.$style=Oe,this.centered=!1,this.slottable=!1,this.themeColor="rgba(238, 238, 238, 0.5)"}static get observedAttributes(){return super.observedAttributes.concat(["centered"])}}wt.$name=R,wt.$version="2.0.0";var ke=":host{display:block;height:100%;overflow:hidden;position:relative;width:100%}";const qt=new WeakMap,Qt=new WeakMap,te=new WeakMap,ee=new WeakMap,xe="both",_e="horizontal",se="vertical",Ie="none";class St extends j{constructor(){super(...arguments),this.$onSelectionChange=null,this.$onSourceImageLoad=null,this.$onSourceImageTransform=null,this.$scale=1,this.$style=ke,this.resize=se,this.selection="",this.slottable=!1}set $image(t){Qt.set(this,t)}get $image(){return Qt.get(this)}set $sourceImage(t){ee.set(this,t)}get $sourceImage(){return ee.get(this)}set $canvas(t){qt.set(this,t)}get $canvas(){return qt.get(this)}set $selection(t){te.set(this,t)}get $selection(){return te.get(this)}static get observedAttributes(){return super.observedAttributes.concat(["resize","selection"])}connectedCallback(){super.connectedCallback();let t=null;if(this.selection?t=this.ownerDocument.querySelector(this.selection):t=this.closest(this.$getTagNameOf(v)),nt(t)){this.$selection=t,this.$onSelectionChange=this.$handleSelectionChange.bind(this),k(t,K,this.$onSelectionChange);const e=t.closest(this.$getTagNameOf(A));if(e){this.$canvas=e;const s=e.querySelector(this.$getTagNameOf(T));s&&(this.$sourceImage=s,this.$image=s.cloneNode(!0),this.$getShadowRoot().appendChild(this.$image),this.$onSourceImageLoad=this.$handleSourceImageLoad.bind(this),this.$onSourceImageTransform=this.$handleSourceImageTransform.bind(this),k(s.$image,q,this.$onSourceImageLoad),k(s,ft,this.$onSourceImageTransform))}this.$render()}}disconnectedCallback(){const{$selection:t,$sourceImage:e}=this;t&&this.$onSelectionChange&&(O(t,K,this.$onSelectionChange),this.$onSelectionChange=null),e&&this.$onSourceImageLoad&&(O(e.$image,q,this.$onSourceImageLoad),this.$onSourceImageLoad=null),e&&this.$onSourceImageTransform&&(O(e,ft,this.$onSourceImageTransform),this.$onSourceImageTransform=null),super.disconnectedCallback()}$handleSelectionChange(t){this.$render(t.detail)}$handleSourceImageLoad(){const{$image:t,$sourceImage:e}=this,s=t.getAttribute("src"),i=e.getAttribute("src");i&&i!==s&&(t.setAttribute("src",i),t.$ready(()=>{setTimeout(()=>{this.$render()},50)}))}$handleSourceImageTransform(t){this.$render(void 0,t.detail.matrix)}$render(t,e){const{$canvas:s,$selection:i}=this;!t&&!i.hidden&&(t=i),(!t||t.x===0&&t.y===0&&t.width===0&&t.height===0)&&(t={x:0,y:0,width:s.offsetWidth,height:s.offsetHeight});const{x:n,y:r,width:a,height:h}=t,c={},{clientWidth:o,clientHeight:u}=this;let $=o,p=u,d=NaN;switch(this.resize){case xe:d=1,$=a,p=h,c.width=a,c.height=h;break;case _e:d=h>0?u/h:0,$=a*d,c.width=$;break;case se:d=a>0?o/a:0,p=h*d,c.height=p;break;case Ie:default:o>0?d=a>0?o/a:0:u>0&&(d=h>0?u/h:0)}this.$scale=d,this.$setStyles(c),this.$sourceImage&&this.$transformImageByOffset(e!=null?e:this.$sourceImage.$getTransform(),-n,-r)}$transformImageByOffset(t,e,s){const{$image:i,$scale:n,$sourceImage:r}=this;if(r&&i&&n>=0){const[a,h,c,o,u,$]=t,p=(e*o-c*s)/(a*o-c*h),d=(s*a-h*e)/(a*o-c*h),z=a*p+c*d+u,_=h*p+o*d+$;i.$ready(C=>{this.$setStyles.call(i,{width:C.naturalWidth*n,height:C.naturalHeight*n})}),i.$setTransform(a,h,c,o,z*n,_*n)}}}St.$name=ae,St.$version="2.0.0";var Ne='<cropper-canvas background><cropper-image rotatable scalable skewable translatable></cropper-image><cropper-shade hidden></cropper-shade><cropper-handle action="select" plain></cropper-handle><cropper-selection initial-coverage="0.5" movable resizable><cropper-grid role="grid" bordered covered></cropper-grid><cropper-crosshair centered></cropper-crosshair><cropper-handle action="move" theme-color="rgba(255, 255, 255, 0.35)"></cropper-handle><cropper-handle action="n-resize"></cropper-handle><cropper-handle action="e-resize"></cropper-handle><cropper-handle action="s-resize"></cropper-handle><cropper-handle action="w-resize"></cropper-handle><cropper-handle action="ne-resize"></cropper-handle><cropper-handle action="nw-resize"></cropper-handle><cropper-handle action="se-resize"></cropper-handle><cropper-handle action="sw-resize"></cropper-handle></cropper-selection></cropper-canvas>';const Re=/^img|canvas$/,Me=/<(\/?(?:script|style)[^>]*)>/gi,ie={template:Ne};pt.$define(),wt.$define(),Et.$define(),vt.$define(),gt.$define(),Ct.$define(),bt.$define(),St.$define();class ne{constructor(t,e){if(this.options=ie,rt(t)&&(t=document.querySelector(t)),!nt(t)||!Re.test(t.localName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,e=Object.assign(Object.assign({},ie),e),this.options=e;const{ownerDocument:s}=t;let{container:i}=e;if(i&&(rt(i)&&(i=s.querySelector(i)),!nt(i)))throw new Error("The `container` option must be an element or a valid selector.");nt(i)||(t.parentElement?i=t.parentElement:i=s.body),this.container=i;const n=t.localName;let r="";n==="img"?{src:r}=t:n==="canvas"&&window.HTMLCanvasElement&&(r=t.toDataURL());const{template:a}=e;if(a&&rt(a)){const h=document.createElement("template"),c=document.createDocumentFragment();h.innerHTML=a.replace(Me,"&lt;$1&gt;"),c.appendChild(h.content),Array.from(c.querySelectorAll(T)).forEach(o=>{o.setAttribute("src",r),o.setAttribute("alt",t.alt||"The image to crop")}),t.parentElement?(t.style.display="none",i.insertBefore(c,t.nextSibling)):i.appendChild(c)}}getCropperCanvas(){return this.container.querySelector(A)}getCropperImage(){return this.container.querySelector(T)}getCropperSelection(){return this.container.querySelector(v)}getCropperSelections(){return this.container.querySelectorAll(v)}}ne.version="2.0.0-rc.2"},64599:function(W,D,m){var x=m(96263);function g(E,I){var b=typeof Symbol!="undefined"&&E[Symbol.iterator]||E["@@iterator"];if(!b){if(Array.isArray(E)||(b=x(E))||I&&E&&typeof E.length=="number"){b&&(E=b);var A=0,R=function(){};return{s:R,n:function(){return A>=E.length?{done:!0}:{done:!1,value:E[A++]}},e:function(B){throw B},f:R}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var M=!0,Z=!1,T;return{s:function(){b=b.call(E)},n:function(){var B=b.next();return M=B.done,B},e:function(B){Z=!0,T=B},f:function(){try{!M&&b.return!=null&&b.return()}finally{if(Z)throw T}}}}W.exports=g,W.exports.__esModule=!0,W.exports.default=W.exports}}]);
